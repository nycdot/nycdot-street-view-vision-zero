<!doctype html>
<!--[if lt IE 7]>  <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>shareabouts sv vision zero</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link href="bower_components/shareabouts-js/src/styles/shareabouts.css" rel="stylesheet" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <script src="bower_components/modernizr/modernizr.js"></script>

  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->


    <div class="shareabouts-streetview-container">
      <div class="shareabouts-streetview-map"></div>
      <div class="shareabouts-streetview"></div>
    </div>



    <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.8.0/backbone.marionette.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" type="text/javascript"></script>

    <script src="//rawgit.com/openplans/gatekeeper/gh-pages/gatekeeper.js"></script>

    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/shareabouts-js/src/utils.js"></script>
    <script src="bower_components/shareabouts-js/src/models.js"></script>
    <script src="bower_components/shareabouts-js/src/streetview.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <script>
      var sa = new Shareabouts.StreetView({
        el: '.shareabouts-streetview',
        map: {
          center: [40.7210690835, -73.9981985092],
          maxDistance: '100m'
        },
        placeStyles: [
          {
            condition: '"{{location_type}}" == "doublepark"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-doublepark.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "jaywalking"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-jaywalking.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "longcross"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-longcross.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "longwait"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-longwait.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "notime"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-notime.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "redlight"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-redlight.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "speeding"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-speeding.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "visibility"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-visibility.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "yield"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-yield.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "bike"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-bike.png'
            },
            focusIcon: {}
          },
          {
            condition: '"{{location_type}}" == "other"',
            icon: {
              url: 'http://visionzero-dev.herokuapp.com/static/css/images/markers/marker-other.png'
            },
            focusIcon: {}
          },
        ],

        datasetUrl: 'http://data.shareabouts.org/api/v2/nycdot/datasets/vz/places',
        addButtonLabel: 'Add a Place',

        // These are template functions that expect geojson.
        templates: {
          // This is only an example. You should use Mustache, Handlebars, etc in real life.
          'place-detail': function(data) {
            return '<h2>' + data.name + '</h2>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>' +
              '<p>' + data.description + '</p>';
          },
          'place-form': function(data) {
            return '<p class="form-instructions">Drag the map to the place you want to share.</p>' +
              '<h2>Add a Place</h2>' +
              '<form novalidate>' +
              '<p><label>Your Name<input type="text" name="submitter_name" required /></label></p>' +
              '<p><label>Your Email<input type="text" name="private-email" /></label></p>' +
              '<p><label>Title<input type="text" name="name" required /></label></p>' +
              '<p><label>Description<textarea name="description" required></textarea></label></p>' +
              '<p><input type="submit" value="Add to Map"></p>'
              '</form>'
          }
        }
      });

    </script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>

    <!-- build:js({app,.tmp}) scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
</body>
</html>
